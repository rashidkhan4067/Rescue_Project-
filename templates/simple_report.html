{% extends "base.html" %}
{% block title %}Simple Report Test - Missing Person Finder{% endblock %}

{% block content %}
<div style="max-width: 600px; margin: 2rem auto; padding: 2rem; background: white; border-radius: 8px; box-shadow: 0 4px 6px rgba(0,0,0,0.1);">
    <h1>Simple Report Test</h1>
    <p>This is a simplified version for testing report submission without JavaScript complications.</p>
    
    <!-- Flash Messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            <div style="margin-bottom: 1rem;">
                {% for category, message in messages %}
                    <div style="padding: 0.75rem; margin-bottom: 0.5rem; border-radius: 4px; 
                                {% if category == 'success' %}background: #d4edda; color: #155724; border: 1px solid #c3e6cb;
                                {% elif category == 'error' %}background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb;
                                {% else %}background: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb;{% endif %}">
                        {{ message }}
                    </div>
                {% endfor %}
            </div>
        {% endif %}
    {% endwith %}
    
    <form method="POST" enctype="multipart/form-data" style="display: flex; flex-direction: column; gap: 1rem;">
        {{ form.hidden_tag() }}
        
        <div>
            <label for="name" style="display: block; margin-bottom: 0.5rem; font-weight: bold;">Full Name *</label>
            {{ form.name(style="width: 100%; padding: 0.5rem; border: 1px solid #ccc; border-radius: 4px;") }}
        </div>
        
        <div>
            <label for="age" style="display: block; margin-bottom: 0.5rem; font-weight: bold;">Age *</label>
            {{ form.age(style="width: 100%; padding: 0.5rem; border: 1px solid #ccc; border-radius: 4px;") }}
        </div>
        
        <div>
            <label for="gender" style="display: block; margin-bottom: 0.5rem; font-weight: bold;">Gender *</label>
            {{ form.gender(style="width: 100%; padding: 0.5rem; border: 1px solid #ccc; border-radius: 4px;") }}
        </div>
        
        <div>
            <label for="area" style="display: block; margin-bottom: 0.5rem; font-weight: bold;">Last Known Location *</label>
            {{ form.area(style="width: 100%; padding: 0.5rem; border: 1px solid #ccc; border-radius: 4px;") }}
        </div>
        
        <div>
            <label for="last_seen_date" style="display: block; margin-bottom: 0.5rem; font-weight: bold;">Last Seen Date</label>
            {{ form.last_seen_date(style="width: 100%; padding: 0.5rem; border: 1px solid #ccc; border-radius: 4px;") }}
        </div>
        
        <div>
            <label for="last_seen_time" style="display: block; margin-bottom: 0.5rem; font-weight: bold;">Last Seen Time</label>
            {{ form.last_seen_time(style="width: 100%; padding: 0.5rem; border: 1px solid #ccc; border-radius: 4px;") }}
        </div>
        
        <div>
            <label for="description" style="display: block; margin-bottom: 0.5rem; font-weight: bold;">Description *</label>
            {{ form.description(style="width: 100%; padding: 0.5rem; border: 1px solid #ccc; border-radius: 4px; min-height: 100px;") }}
        </div>
        
        <div>
            <label for="image" style="display: block; margin-bottom: 0.5rem; font-weight: bold;">Photo</label>
            {{ form.image(style="width: 100%; padding: 0.5rem; border: 1px solid #ccc; border-radius: 4px;") }}
        </div>
        
        <button type="submit" style="padding: 1rem 2rem; background: #007bff; color: white; border: none; border-radius: 4px; font-size: 1rem; cursor: pointer;">
            Submit Report
        </button>
    </form>
    
    <div style="margin-top: 2rem; padding: 1rem; background: #f8f9fa; border-radius: 4px;">
        <h3>Debug Info</h3>
        <p><strong>Current User:</strong> {{ current_user.username if current_user.is_authenticated else 'Not logged in' }}</p>
        <p><strong>User ID:</strong> {{ current_user.id if current_user.is_authenticated else 'N/A' }}</p>
        <p><strong>Is Admin:</strong> {{ current_user.is_admin if current_user.is_authenticated else 'N/A' }}</p>
        <p><strong>Today:</strong> {{ today }}</p>
    </div>
    
    <div style="margin-top: 1rem;">
        <a href="{{ url_for('main.dashboard') }}" style="color: #007bff; text-decoration: none;">‚Üê Back to Dashboard</a>
    </div>
</div>
{% endblock %}
